import type { ComponentOptionsMixin } from 'vue'

interface WindowSizeMixin extends ComponentOptionsMixin {
  data: () => {
    window: {
      width: number
      height: number
    }
  }
  created: () => void
  destroyed: () => void
  methods: {
    handleResize: () => void
  }
}

const windowSizeMixin: WindowSizeMixin = {
  data() {
    return {
      window: {
        width: 0,
        height: 0,
      },
    }
  },
  created() {
    window.addEventListener('resize', this.handleResize)
    this.handleResize()
  },
  destroyed() {
    window.removeEventListener('resize', this.handleResize)
  },
  methods: {
    handleResize() {
      this.window.width = window.innerWidth
    },
  },
}

export default windowSizeMixin
